STM32F10X，MPU6050获取欧拉角及四元数示例程序
----------------------------------------------
概述： 
   1.实现原理：移植基于MSP430的MPUdmp5.0官方固件库，利用mpu6050内部集成的DMP（dynamic motion processer）硬件直接运算获得四元数，后将四元数存入内部的FIFO（first in first out）。最后FIFO通过IIC与单片机通信，将四元数发送给单片机。单片机得到四元数可求解出欧拉角。
   2.特点：数据准确（欧拉角参考误差0.1°），延时很小，极大地减轻了单片机姿态解算的运算负担。dmp运算速率可支持最大200Hz的输出速率。
   3.通信：IIC，可使用硬件IIC和模拟IIC
----------------------------------------------
示例程序使用方法：
   1.硬件连接：示例程序使用模拟IIC与mpu6050通信，端口配置与I2C1相同（SCL为PB6，SDA为PB7），同时需将mpu6050的INT脚与PA0连接，用于dmp数据更新中断检测（dmp数据更新时INT脚输出高电平脉冲）。 
   2.软件配置：示例程序软件配置已完成，其中mpuiic.c\sys.c\delay.c\mpu6050.c文件源自正点原子，usart.c文件源自洋桃一号,inv_mpu.c\inv_mpu_dmp_motion_driver.c及其配套.h文件源自基于MSP430的MPUdmp5.0固件库（有移植修改）。上述文件有调用关系，需配合使用，替换文件很可能导致程序不正常运行。
   3.运行效果：连接串口助手，高速实时输出欧拉角。
----------------------------------------------
其他注意事项：
   1.默认mpu6050上电时进行加速度计校准，上电时需保证平放稳定，否则校准失败报错。
   2.mpu6050的INT脚可以触发中断，本例程中INT引脚正常时为低电平，mpu6050内部dmp每完成一次运算更新就会触发INT引脚输出50us的高电平脉冲用以提示单片机及时读取更新数据。因此单片机需设置一个IO口连接INT引脚并配置上升沿中断检测用以获取中断信息。本例程中选用PA0.
   3.dmp数据读取在NVIC中断服务函数中实现，原因是dmp数据读取对于实时性要求很高，须在dmp更新数据触发INT中断后立即读取，否则可能读取失败。因此中断服务函数也要尽可能精简，以减少中断时间。建议中断服务函数内只完成读取保存操作。
   4.示例程序的dmp数据更新速率设置为100Hz，可在inv_mpu.h的#define DEFAULT_MPU_HZ  (100)修改。数值范围为4Hz-200Hz，超过200Hz则dmp难以完成计算。
   5.六轴加速度计/陀螺仪的俯仰角、横滚角不会出现累计偏差，但是偏航角（yaw）会产生累计偏差，这是六轴加速度计/陀螺仪的固有问题。可以通过外挂一个磁力计解决，mpu6050支持外挂磁力计。
----------------------------------------------
开发建议：
   以上方法可使mpu6050输出较为精准的欧拉角、四元数数据。满足了绝大多数要求不高的使用场合。同时mpu6050低廉的价格也使其应用门槛低。
   本例程提供了一种基于mpu6050的姿态获取方案，如有需要可直接移植到自己的项目。
   代码资源大部分由网上获取，用作学习交流用途。	